<!-- VISITOR COUNTER -->
<div style="display:flex; gap:12px; margin-top:1.5rem; flex-wrap:wrap;">

    <!-- Page Visits -->
    <div style="background:#4f46e5; color:white; padding:8px 16px; border-radius:24px; font-weight:600; display:flex; align-items:center; gap:8px; box-shadow:0 2px 6px rgba(0,0,0,0.15); position:relative; cursor:default;"
         title="Number of visitors to this page">
        <span style="font-size:1.1rem;">ü§ñ</span>
        <span>Page Visits:</span>
        <span id="page-visit-count">0</span>
    </div>

    <!-- Total Visits -->
    <div style="background:#10b981; color:white; padding:8px 16px; border-radius:24px; font-weight:600; display:flex; align-items:center; gap:8px; box-shadow:0 2px 6px rgba(0,0,0,0.15); position:relative; cursor:default;"
         title="Total visitors across all pages">
        <span style="font-size:1.1rem;">üåê</span>
        <span>Total Visits:</span>
        <span id="total-visit-count">0</span>
    </div>

</div>

<script>
    const pageSlug = "{{ page.url | slugify | default: 'home' }}";
    const pageApiUrl = `https://api.countapi.xyz/hit/sujeetkumar7.github.io/${pageSlug}`;
    const totalApiUrl = `https://api.countapi.xyz/hit/sujeetkumar7.github.io/total`;

    // Animated counting function
    function animateCount(element, target) {
      let count = 0;
      const increment = Math.ceil(target / 50); // 50 steps animation
      const interval = setInterval(() => {
        count += increment;
        if (count >= target) {
          count = target;
          clearInterval(interval);
        }
        element.innerText = count;
      }, 20);
    }

    async function updateVisits() {
      try {
        const pageRes = await fetch(pageApiUrl);
        const pageData = await pageRes.json();
        animateCount(document.getElementById('page-visit-count'), pageData.value);

        const totalRes = await fetch(totalApiUrl);
        const totalData = await totalRes.json();
        animateCount(document.getElementById('total-visit-count'), totalData.value);
      } catch(err) {
        console.error('CountAPI error:', err);
        document.getElementById('page-visit-count').innerText = 'N/A';
        document.getElementById('total-visit-count').innerText = 'N/A';
      }
    }

    updateVisits();
</script>
