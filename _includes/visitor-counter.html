<div style="display:flex; gap:10px; margin-top:1rem; flex-wrap:wrap;">
    <div style="background:#4f46e5; color:white; padding:6px 12px; border-radius:20px; font-weight:500; display:flex; align-items:center; gap:6px; box-shadow:0 2px 6px rgba(0,0,0,0.15);">
        <span>üìÑ Page Visits:</span>
        <span id="page-visit-count">0</span>
    </div>
    <div style="background:#10b981; color:white; padding:6px 12px; border-radius:20px; font-weight:500; display:flex; align-items:center; gap:6px; box-shadow:0 2px 6px rgba(0,0,0,0.15);">
        <span>üåç Total Visits:</span>
        <span id="total-visit-count">0</span>
    </div>
</div>

<script>
    // Use page.url slug for each post, default to "home" if undefined
    const pageSlug = "{{ page.url | slugify | default: 'home' }}";
    const pageApiUrl = `https://api.countapi.xyz/hit/sujeetkumar7.github.io/${pageSlug}`;
    const totalApiUrl = `https://api.countapi.xyz/hit/sujeetkumar7.github.io/total`;

    async function updateVisits() {
      try {
        const pageRes = await fetch(pageApiUrl);
        const pageData = await pageRes.json();
        document.getElementById('page-visit-count').innerText = pageData.value;

        const totalRes = await fetch(totalApiUrl);
        const totalData = await totalRes.json();
        document.getElementById('total-visit-count').innerText = totalData.value;
      } catch(err) {
        console.error('CountAPI error:', err);
        document.getElementById('page-visit-count').innerText = 'N/A';
        document.getElementById('total-visit-count').innerText = 'N/A';
      }
    }

    updateVisits();
</script>
